!function(a){a.fn.searchAuto=function(e){var t=a('<ul class="ui-autocomplete lt pos_abs fwidth bg_white color_black txt_lt" />'),l=a.extend({appendTo:"body",listTemplate:t,delay:200},e),s=l.listTemplate;a(l.appendTo).append(s),s.css("display","none"),a(document).on("click.sauto",function(e){a(e.target).closest(l.fieldName).length||a(e.target).closest(t).length||a(t).hide()}),this.attr("autocomplete","off");return this.each(function(){a(this).on("input.sauto",function(){s.empty();var e=[];if(a.trim(a(this).val()).length>=l.minLength){var n=this;setTimeout(function(){a.isFunction(l.source)&&l.source.call(n,a(n).val(),function(n){e=n,s.empty();for(let a=0;a<n.length;a++){var c=l.itemTemplate;""===n[a].icon&&(c=(c=c.replace(/\<span class="img"\>.+?\<\/span\>/gms,"")).replace("lt fwidth color_black","lt fwidth color_black all")),c=(c=(c=(c=c.replace('data-sauto="url"','href="'+n[a].url+'"')).replace('data-sauto="img"','src="'+n[a].icon+'" alt="'+n[a].label+'"')).replace('<span data-sauto="label"></span>',"<span>"+n[a].label+"</span>")).replace('class="','class="itm_search'+(a+1)+" "),s.append(c)}s.css("display","block"),a(t).one("click.sauto","li",function(s){var n=a(s.target).closest("li");if(e){var c=e[n.index()];c&&(a(l.fieldName).val(c.label),a.isFunction(l.select)&&l.select(c))}a(t).hide()})})},l.delay)}else s.empty(),a(t).hide()})})}}(jQuery),function(a){var e=a.extend({fieldName:'[name="s"]',minLength:4,maxRows:10,appendTo:"#search-bar"},paSAutoVars);a(e.fieldName).searchAuto({appendTo:e.appendTo,fieldName:e.fieldName,minLength:e.minLength,maxRows:e.maxRows,delay:e.delay,source:function(t,l){var s=null!=a("#search_sort")?a("#search_sort").val():"",n=null!=a("#search_cat")?a("#search_cat").val():"";a.ajax({url:e.ajaxurl,dataType:"json",data:{action:"pa_search_autocomplete",term:a.trim(t),sort:s,scat:n},success:function(e){l(a.map(e.results,function(a){return{label:a.title,value:a.title,url:a.url,icon:a.img}}))}})},itemTemplate:'<li class="ui-menu-item lt color_black" role="presentation"><a data-sauto="url" class="lt fwidth color_black"><span class="img"><img class="lt height_auto" data-sauto="img"></span><span data-sauto="label"></span></a></li>'})}(jQuery);